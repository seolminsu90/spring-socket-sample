<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>웹소켓 클라이언트 샘플</title>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"
        integrity="sha512-iKDtgDyTHjAitUDdLljGhenhPwrbBfqTKWO1mkhSFH3A7blITC9MhYon6SjnMhp4o0rADGw9yAC6EW4t5a4K3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"
        integrity="sha512-1QvjE7BtotQjkq8PxLeF6P46gEpBRXuskzIVgjFpekzFVF4yjRgrQvTG1MTOJ3yQgvTteKAcO7DSZI92+u/yZw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    const socket = new SockJS('http://localhost:9000/ws');
    let options = {debug: true};
    const stompClient = Stomp.over(socket, options);

    let headers = {Authorization: "my tokens"};

    stompClient.connect(headers, (frame) => {
        console.log('소켓 연결 성공', frame);
        stompClient.subscribe('/topic/sample-topic', (tick) => {
            console.log("수신됬습니다.", tick.body);
        })

        // 서버/클라의 content-type 이 맞아야한다?
        stompClient.send('/app/send', { 'content-type': 'text/plain' }, 'Hello, Stomp!');
    }, (error) => {
        console.log('연결실패');
        console.log(error)
    })


</script>
</body>
</html>
